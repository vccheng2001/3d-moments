# Configuration for Cog ⚙️
# Reference: https://github.com/replicate/cog/blob/main/docs/yaml.md

build:
  # set to true if your model requires a GPU
  gpu: true
  cuda: "10.2"

  # python version in the form '3.8' or '3.8.12'
  python_version: "3.8"

  # a list of packages in the format <package-name===<version>
  python_packages:
    - ipython==8.4.0
    - absl-py==0.15.0
    - beautifulsoup4==4.10.0
    - cached-property==1.5.2
    - cachetools==4.2.4
    - charset-normalizer==2.0.7
    - configargparse==1.5.3
    - cupy-cuda101==9.6.0
    - cycler==0.10.0
    - dill==0.3.4
    - fastrlock==0.8
    - filelock==3.3.0
    - gdown==4.4.0
    - google-auth==2.3.0
    - google-auth-oauthlib==0.4.6
    - grpcio==1.41.0
    - h5py==3.5.0
    - idna==3.2
    - imageio==2.9.0
    - imageio-ffmpeg==0.4.5
    - importlib-metadata==4.8.1
    - joblib==1.1.0
    - kiwisolver==1.3.2
    - kornia==0.5.11
    - lpips==0.1.4
    - markdown==3.3.4
    - matplotlib==3.4.3
    - networkx==2.6.3
    - oauthlib==3.1.1
    - opencv-python-headless==4.6.0.66
    - packaging==21.0
    - pandas==1.3.4
    - pip==22.1.2
    - plotly==5.3.1
    - protobuf==3.18.1
    - pyasn1==0.4.8
    - pyasn1-modules==0.2.8
    - pyparsing==2.4.7
    - pyquaternion==0.9.9
    - pysocks==1.7.1
    - python-dateutil==2.8.2
    - pytz==2021.3
    - pywavelets==1.1.1
    - requests==2.26.0
    - requests-oauthlib==1.3.0
    - rsa==4.7.2
    - scikit-image==0.18.3
    - scikit-learn==1.0
    - scipy==1.7.1
    - setuptools==62.4.0
    - sklearn==0.0
    - soupsieve==2.2.1
    - tenacity==8.0.1
    - tensorboard==2.7.0
    - tensorboard-data-server==0.6.1
    - tensorboard-plugin-wit==1.8.0
    - tensorboardx==2.4
    - threadpoolctl==3.0.0
    - tifffile==2021.10.12
    - timm==0.4.5
    - urllib3==1.26.7
    - werkzeug==2.0.2
    - zipp==3.6.0
    # - pytorch3d==0.6.2
  
  # commands run after the environment is setup
  run:
    - "pip install fvcore"
    - "curl -LO https://github.com/NVIDIA/cub/archive/1.10.0.tar.gz && tar xzf 1.10.0.tar.gz && export CUB_HOME=$PWD/cub-1.10.0 && git clone https://github.com/facebookresearch/pytorch3d.git && cd pytorch3d && TORCH_CUDA_ARCH_LIST='7.5' FORCE_CUDA=1 python setup.py build install"
    - "echo done setting up environment!"

# predict.py defines how predictions are run on your model
predict: "predict.py:Predictor"

